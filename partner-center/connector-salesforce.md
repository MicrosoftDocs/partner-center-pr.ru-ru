---
title: Соединитель для совместной продажи в центре партнеров для Salesforce CRM
ms.topic: how-to
ms.service: partner-dashboard
ms.subservice: partnercenter-csp
description: Синхронизируйте свои ссылки в центре партнеров с помощью Salesforce CRM. Продавцов может совместно продаваться с корпорацией Майкрософт в ваших системах CRM.
author: sroy
ms.author: sroy
ms.localizationpriority: medium
ms.date: 06/28/2021
ms.openlocfilehash: f8cb4cd2488e55ab64cf7b7cdce4a3e950b266de
ms.sourcegitcommit: 6a6e8f9af0a58b32770c7fce9f567dd4795b9797
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/29/2021
ms.locfileid: "113029124"
---
# <a name="co-sell-connector-for-salesforce-crm---overview"></a>Соединитель для совместных продаж для Salesforce CRM — обзор

**Соответствующие роли**: администратор ссылок | Системный администратор или Настройщик системы в CRM

Соединитель совместных продаж в центре партнеров позволяет продавцов совместную продажу с корпорацией Майкрософт в ваших системах CRM. Они не должны быть обучены для использования центра партнеров для управления сделками в совместных продажах. Используя соединители совместной работы, вы можете создать новую ссылку для совместной продажи, чтобы привлечь продавца Майкрософт, получать ссылки от продавца Майкрософт, принимать или отклонять ссылки, изменять данные сделки, такие как стоимость сделки и дату закрытия.  Вы также можете получить обновления от Microsoft продавцов для этих сделок совместной продажи. Все ваши ссылки можно выполнять при работе в CRM по вашему выбору, а не в центре партнеров.

Решение основано на решении Microsoft Power Автоматизируing и использует API-интерфейсы центра партнеров.

## <a name="before-you-install---pre-requisites"></a>Перед установкой предварительных требований

|**Разделы**|**Сведения**|**Ссылки**|
|--------------|--------------------|------|
|Идентификатор Microsoft Partner Network |Требуется допустимый идентификатор MPN|Присоединение к [MPN](https://partner.microsoft.com/)|
|Готово к совместной продаже|Ваше решение для работы с IP-адресами и службами должно быть готово к совместной продаже.|[Продажа с Майкрософт](https://partner.microsoft.com/membership/sell-with-microsoft)|
|Учетная запись Центра партнеров|Идентификатор MPN, связанный с клиентом центра партнеров, должен совпадать с ИДЕНТИФИКАТОРом MPN, связанным с решением для совместной продажи. Прежде чем развертывать соединители, убедитесь, что вы видите ссылки на совместные продажи на портале центра партнеров.|[Управляйте своей учетной записью](create-user-accounts-and-set-permissions.md)|
|Роли пользователей Центра партнеров|Сотрудник, который будет устанавливать и использовать соединители, должен быть администратором ссылок.|[Назначение пользователям ролей и разрешений](create-user-accounts-and-set-permissions.md)|
|SalesForce CRM|Роль пользователя CRM — системный администратор или Настройщик системы|[Назначение ролей в Salesforce CRM](https://help.salesforce.com/articleView?id=assigning_users_to_roles.htm&type=5)|
|Учетная запись потока Power автоматизиру|Создайте новую рабочую среду с базой данных для тестирования, промежуточного хранения и рабочей среды. Если у вас есть рабочая среда с базой данных, ее можно использовать повторно. Пользователь, который планирует установить решение соединителя, должен иметь лицензию Power автоматизировать и доступ к этой среде. Вы можете отслеживать ход выполнения и получать дополнительные сведения в [Power Автоматизация](https://flow.microsoft.com/) в случае сбоя установки. Выберите **Просмотреть журнал** в разделе **решения**.|[Создание среды или управление ею](/power-platform/admin/create-environment#create-an-environment-with-a-database)|

## <a name="installation-of-salesforce-package-for-microsoft-custom-fields"></a>Установка пакета salesforce для настраиваемых полей Майкрософт

Чтобы синхронизировать ссылки в центре партнеров и Salesforce CRM, в решении Power автоматизируется необходимость четко определять поля ссылок, относящиеся к корпорации Майкрософт. Эта разделительной предоставляет группам продавцов-партнеров возможность решать, какие ссылки должны предоставляться корпорации Майкрософт для совместной продажи.

1. В Salesforce активируйте **заметки** и добавьте их в список возможных сделок. [Ссылка](https://help.salesforce.com/articleView?err=1&id=notes_admin_setup.htm&type=5)

1. Активируйте **группы возможных сделок** , выполнив следующие действия:
    - В программе установки используйте поле **Быстрый поиск** , чтобы найти параметры группы возможных сделок.
    - При необходимости задайте необходимые параметры. [Ссылка](https://help.salesforce.com/articleView?id=sf.opp_team_manage.htm&type=5)

1. В Salesforce установите настраиваемые поля и объекты с помощью [установщика пакетов](https://login.salesforce.com/packaging/installPackage.apexp?p0=04t2w000006WIwV). Используйте этот установщик для установки пакета в любую компанию.

    >[!NOTE]
    >При установке в песочницу необходимо заменить начальную часть URL-адреса на `http://test.salesforce.com` .

1. В Salesforce добавьте решения Майкрософт в список, связанный с **возможной сделкой** . После добавления щелкните значок **гаечного ключа** и обновите свойства.

## <a name="best-practice-test-before-you-go-live"></a>Рекомендации: Протестируйте перед переходом в динамический

Прежде чем устанавливать, настраивать и настраивать решение Power Автоматизация в рабочей среде, обязательно протестируйте решение на промежуточном экземпляре CRM.

- Установите решение Microsoft Power автоматизируя в промежуточной среде или экземпляре CRM.

- Создайте копию решения и запустите настройку потока настройки и автоматизации энергосбережения в промежуточной среде.

- Протестируйте решение в промежуточном или экземпляре CRM.

- В случае успеха импортируйте в рабочий экземпляр в качестве управляемого решения.

## <a name="install-partner-center-referrals-synchronization-for-salesforce-crm"></a>Установка синхронизации ссылок центра партнеров для Salesforce CRM

1. Откройте [Power автоматизиру](https://flow.microsoft.com) и выберите **среды** в правом верхнем углу. Будут показаны доступные экземпляры CRM.

1. Выберите нужный экземпляр CRM из раскрывающегося списка в правом верхнем углу.

1. Выберите **решения** на панели навигации слева.

1. Выберите ссылку **Open AppSource (открыть** ) в верхнем меню.

   :::image type="content" source="images/cosellconnectors/open-appsource.png" alt-text="Открыть AppSource":::

1. Найдите **соединители центров партнеров для Salesforce** во всплывающем окне.  

   :::image type="content" source="images/salesforce/salesforce-get-it-now.png" alt-text="Снимок экрана: получить сейчас.":::

1. Нажмите кнопку **получить сейчас** , а затем выберите **продолжить**.

1. На следующей странице выберите среду CRM salesforce для установки приложения. Примите условия.

1. Затем вы направляетесь на страницу **Управление решениями** .  Перейдите в раздел "ссылки центра партнеров" с помощью кнопок со стрелками в нижней части страницы. **Запланированная установка** должна отображаться рядом с решением "ссылки центра партнеров". Установка займет 10-15 минут.

1. После завершения установки вернитесь к [Power автоматизиру](https://flow.microsoft.com) и выберите **решения** в левой области навигации. Обратите внимание, что в списке решений можно найти **ссылку Центр партнеров синхронизация для Salesforce** .

1. Выберите **ссылку Центр партнеров синхронизация для Salesforce**. Доступны следующие потоки и сущности Power автоматизировать:

   :::image type="content" source="images/cosellconnectors/partner-center-referrals-synchronization.png" alt-text="Потоки Salesforce":::

## <a name="configure-the-solution"></a>Настройка решения

1. После установки решения в экземпляре CRM вернитесь к [Power автоматизиру](https://flow.microsoft.com/).

1. В раскрывающемся списке **среды** в правом верхнем углу выберите экземпляр CRM, в котором установлено решение Power автоматизировать.

1. Вам потребуется создать подключения, связывающие три учетные записи пользователей:

   - Пользователь центра партнеров с учетными данными администратора ссылок
   - События Центра партнеров
   - Администратор CRM с потоками Power автоматизиру в решении

   1. На панели навигации слева выберите **подключения** и в списке выберите решение " **ссылки центра партнеров** ".

   1. Создайте подключение, выбрав **создать соединение**.

        :::image type="content" source="images/cosellconnectors/dynamics-1.png" alt-text="Снимок экрана, на котором показано создание соединения.":::

   1. Поиск **ссылок центра партнеров (Предварительная версия)** на панели поиска в правом верхнем углу.

   1. Создайте подключение для пользователя центра партнеров с ролью учетных данных администратора ссылок.

   1. Затем создайте подключение к событиям центра партнеров для пользователя центра партнеров с учетными данными администратора ссылок.

   1. Создайте подключение для Salesforce для пользователя администратора CRM.
  
   1. Создайте подключение для Microsoft инверсии для пользователя администратора CRM.

   1. После добавления всех подключений в вашей среде должны отобразиться следующие подключения:

        :::image type="content" source="images/cosellconnectors/salesforce-connections.png" alt-text="Снимок экрана, показывающий, как наблюдать за подключениями.":::

### <a name="edit-the-connections"></a>Изменение подключений

1. Вернитесь на страницу **решения** и выберите **решение по умолчанию**. Выберите **ссылку на подключение (Предварительная версия)** , щелкнув **все**.

   :::image type="content" source="images/connection-reference-video.gif" alt-text="Снимок экрана, показывающий изменение подключений.":::

1. Измените каждое подключение по отдельности, щелкнув значок с многоточием. Добавьте соответствующие подключения.

   :::image type="content" source="images/cosellconnectors/salesforce15.png" alt-text="На снимке экрана АСТ показано, как изменить соединители.":::

1. Включите потоки в следующей последовательности:
   - Регистрация веб-перехватчика центра партнеров (Предварительная версия)
   - Настроен Создание или получение сведений из Salesforce
   - Создание Referral-Salesforce для совместной продажи в центре партнеров (Предварительная версия)
   - Центр партнеров обновления справочных обновлений в Salesforce (Предварительная версия)  
   - Центр партнеров в Salesforce (Предварительная версия)
   - SalesForce в центр партнеров (Предварительная версия)
   - Возможность Salesforce в центре партнеров (Предварительная версия)
   - Решения Майкрософт для Salesforce в центре партнеров (Предварительная версия)

## <a name="use-webhook-apis-to-register-for-resource-change-events"></a>Использование API веб-перехватчика для регистрации событий изменения ресурсов

Для регистрации событий изменения ресурсов можно использовать API-интерфейсы веб-перехватчика центра партнеров. Эти события изменения отправляются на URL-адрес в виде HTTP-сообщений.

1. Выберите **Центр партнеров для SALESFORCE CRM (Предварительная версия)**.

1. Щелкните **значок редактирования** и выберите **время получения HTTP-запроса**.

1. Щелкните значок **копирования** , чтобы скопировать предоставленный **URL-адрес HTTP POST**.

   :::image type="content" source="images/salesforce/copy-url.png" alt-text="Снимок экрана, на котором показано, как скопировать URL-адрес.":::

1. Выберите поток автоматизации Power автоматизированной **регистрации центра партнеров (Предварительная версия)** и нажмите кнопку **выполнить**.

1. Убедитесь, что в области справа откроется окно **Запуск потока** , и выберите **продолжить**.

1. Введите следующие сведения:

   - **Конечная точка триггера HTTP**: этот URL-адрес был скопирован из предыдущего шага.
   - **Регистрируемые события**: выберите все доступные события (**созданные по ссылке**, **обновленные ссылки**, **связанные-ссылки — созданы**, а **связанные ссылки — обновлены**).
   - **Перезаписать существующие конечные точки триггера, если они есть?**: Да. Только один URL-адрес может быть зарегистрирован для конкретного события веб-перехватчика.

1. Выберите **выполнить последовательность** и нажмите кнопку **Готово**.

Веб-перехватчик теперь может ожидать, создавать и обновлять события.

## <a name="customize-synchronization-steps"></a>Настройка шагов синхронизации

Системы CRM сильно настроены, и вы можете настроить решение Power автоматизируя в соответствии с настройками CRM. Когда ссылки на совместные продажи синхронизируются между центром партнеров и системой CRM, поля, синхронизированные на компьютере центра партнеров, перечислены в разделе [настраиваемое сопоставление полей](https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RWxL6S).

Следуйте указаниям в разделе "сопоставление полей" и при необходимости внесите соответствующие изменения в **[настроить] создание или получение сведений из Salesforce** или переменных среды. Не обновляйте другие потоки в решении Power автоматизиру, так как это может повлиять на будущие обновления решений.

Доступны следующие настройки.

- **Отображать флажок в имени возможности**: по умолчанию рядом с именем возможности отображается галочка, чтобы указать, что синхронизация между центром партнеров и Salesforce CRM происходит успешно. Аналогичным образом в случае сбоя синхронизации будет отображаться крестик. Чтобы не допустить добавления флажка или крестика в имени возможности, установите текущее значение **флажка отображение в переменной среды имя возможной сделки** равным нет.

- **Имя этапа**:

  - **Имя активной стадии**: это этап в конвейере продаж возможности в Salesforce.  Она представляет активный этап и эквивалентна ссылке в принятом состоянии в центре партнеров. Это может быть следующий этап в конвейере продаж после этапа на удержании. На этапе переноса на активный этап на уровне продаж можно принять ссылку в центре партнеров, после чего изменения начнут синхронизироваться.

  - **Имя этапа на удержании**: имя этапа в конвейере продаж возможности в Salesforce. Он представляет собой этап на удержании. Новые ссылки совместной продажи, предоставленные Майкрософт, которые еще не приняты, будут установлены на этот этап в Salesforce. Любые изменения, внесенные в возможность, пока она находится на стадии удержания, не будут синхронизироваться с центром партнеров. На промежуточном этапе продаж с переносом можно принять ссылку в центре партнеров, после чего изменения начнут синхронизироваться.

- **Код страны для учетной записи клиента**. при создании новой ссылки обязательно укажите двухбуквенный код страны (ISO 3166). По умолчанию код страны будет синхронизирован с полем **биллингкаунтри** учетной записи Salesforce. Если в Salesforce есть другое поле для синхронизации кода страны:

  - Для поля неуточняющего кода страны в учетной записи, содержащей двухбуквенный код:

    - Обновите имя поля **кода страны для учетной записи клиента** в переменной среды SalesForce с именем поля CRM. Убедитесь, что вы задаюте имя поля, а не его отображаемое имя.

    - Изменить **[настроить] Создайте или получите сведения из Salesforce** и перейдите к разделу **Создание или получение учетной записи клиента в действии CRM** , чтобы назначить значение **страны** для правильного поля в CRM. Кроме того, удалите назначение значения **Country** из **биллингкаунтри**.

  - Для поля кода страны на основе поиска в учетной записи:

    - Добавьте новое настраиваемое поле в учетную запись и автоматически заполните его двузначным кодом страны (ISO 3166) на основе значения, выбранного в поле поиска, и наоборот.

    - Выполните описанные выше действия для поля Код страны, не являющегося подстановкой, чтобы синхронизировать новое настраиваемое поле из CRM с центром партнеров.

- **Стоимость сделки**. по умолчанию стоимость сделки из центра партнеров будет синхронизирована с **суммой** в CRM. Если в CRM есть другое поле для синхронизации значения сделки:

  - Измените имя поля **значения сделки** в переменной среды Salesforce, указав имя поля CRM. Убедитесь, что вы задаюте имя поля, а не его отображаемое имя.

  - Изменить **[настроить] Создайте или получите сведения из Salesforce** и перейдите к разделу **Создание или обновление возможностей** в CRM и обновите **Создание новой** возможной сделки и **Обновите существующие** действия с возможностью, чтобы назначить **деалвалуе** для правильного поля в Salesforce.

- **Код валюты значения денежной единицы**: имя поля кода валюты для ценности в Salesforce. Это поле Имя API будет использоваться для получения денежного значения сделки при создании или обновлении ссылок в центре партнеров Майкрософт. Если поле кода валюты с денежными значениями отличается от поля **CurrencyIsoCode** по умолчанию, обновите текущее значение этой переменной среды.

  - Измените имя поля **денежного значения** в переменной среды Salesforce, указав имя поля CRM. Убедитесь, что вы задаюте имя поля, а не его отображаемое имя.

  - Изменить **[настроить] Создайте или получите сведения из Salesforce** и перейдите к разделу **Создание или обновление возможностей** в CRM и обновите **Создание новой** возможной сделки и **Обновите существующие** действия с возможностью, чтобы назначить **деалвалуекурренци** для правильного поля в Salesforce.

- **Синхронизировать возможность совместной продажи**. Если задано значение **Да**, только возможности совместной продажи и совместного использования конвейера будут синхронизированы из центра партнеров в Salesforce. Если задано значение **нет**, интересы, совместная продажа и возможности совместного использования конвейера будут синхронизированы из центра партнеров в Salesforce. Эта переменная не влияет на возможности, синхронизированные из Salesforce в центр партнеров.

## <a name="update-environment-variable"></a>Обновить переменную среды

Чтобы обновить значение переменной среды, выполните следующие действия.

1. Перейдите на страницу **решения** и выберите **решение по умолчанию**. Выберите **переменную среды** , выбрав **все**.

1. Выберите переменную среды для значения, которое требуется обновить, и выберите **изменить** с помощью значка многоточия.

1. Обновить **Текущее значение** (не обновлять **значение по умолчанию**) с помощью параметра " **новое значение** " и указав значение. Значение должно соответствовать типу данных переменной. Например, тип данных «да» или «нет» будет принимать значение «Да» или «нет».

   :::image type="content" source="images/cosellconnectors/environment-variables-video.gif" alt-text="Снимок экрана, на котором показаны переменные среды обновления.":::

## <a name="end-to-end-bi-directional-co-sell-referral-synchronization"></a>Сквозная синхронизация двунаправленной совместной продажи

После установки, настройки и настройки решения Power автоматизиру вы можете протестировать синхронизацию ссылок для совместной продажи между Salesforce CRM и центром партнеров.

### <a name="pre-requisites"></a>Предварительные требования

Чтобы синхронизировать ссылки в центре партнеров и Salesforce CRM, решение Power автоматизирует необходимость четко разграничения ссылочные поля Майкрософт. Эта идентификация предоставляет группам продавцов возможность решать, какие ссылки должны предоставляться корпорации Майкрософт для совместной продажи.

Набор настраиваемых полей доступен в рамках синхронизации ссылок центра партнеров для сущности **возможности** решения Salesforce CRM. Пользователь с правами администратора CRM должен создать отдельный раздел CRM с настраиваемыми полями **возможностей** .

Следующие настраиваемые поля должны быть частью раздела CRM:

- **Синхронизация с центром партнеров**: следует ли синхронизировать возможную сделку с центром партнеров. По умолчанию значением этого поля является нет и его необходимо явно задать равным "Да" продавцу, чтобы поделиться возможностью с Майкрософт. Для новых ссылок, предоставленных в центре партнеров в CRM, этому полю будет присвоено значение Да.

- **Идентификатор ссылки**: поле идентификатора только для чтения для ссылки на центр партнеров Майкрософт.

- **Ссылка на ссылку: ссылка** только для чтения на ссылку в центре партнеров Майкрософт.

- **Как можно** получить помощь от корпорации Майкрософт по этой ссылке. Чтобы создать ссылку на совместную продажу, выберите необходимую справку Майкрософт. Контактное лицо клиента должно быть связано с возможностью создания ссылки для совместной продажи. Чтобы создать ссылку не на совместную продажу, не выбирайте это поле. Ссылку, не относящуюся к продажам, можно преобразовать в ссылку для совместной продажи в любое время, выбрав соответствующий параметр справки — обязательный вариант.

- **Видимость ссылок в центре партнеров Майкрософт**: Выберите видимость для ссылки центра партнеров. Сделав ее видимой для Microsoft продавцов, вы можете преобразовать ее в совместную продажу. Если требуется справка Майкрософт, ссылка по умолчанию отображается в Microsoft продавцов. После того как это поле будет помечено как видимое, его нельзя будет отменить.

- **Идентификатор Microsoft CRM**. при создании и принятии веб-ссылки на совместную продажу это поле будет заполнено идентификатором Microsoft CRM.

- **Решения центра партнеров Майкрософт**: Пользовательский объект для связывания готовых решений совместной продажи или решений Майкрософт с возможностью. Одно или несколько решений могут быть добавлены или удалены из возможной сделки. Перед предоставлением общего доступа к этой возможности в корпорацию Майкрософт обязательно добавьте по крайней мере одно решение для совместной продажи или решения Майкрософт. Чтобы связать этот объект с возможностью, обновите форму **возможности** в CRM.

- **Аудит**: журнал аудита только для чтения для синхронизации с ссылками центра партнеров

### <a name="scenarios"></a>ВАРИАНТ

1. Синхронизация ссылок при создании или обновлении ссылок в CRM и синхронизации в центре партнеров:

   1. Войдите в среду Salesforce CRM с помощью пользователя, который обладает видимостью в разделе **возможности** CRM.

   1. При создании **новой возможной сделки** в среде Salesforce CRM убедитесь, что в разделе **Microsoft Partner Center** есть новая возможность.

   1. Возможности, успешно синхронизированные с центром партнеров, будут идентифицированы с помощью значка ✔ в Salesforce CRM.
      :::image type="content" source="images/salesforce/salesforce-environment.png" alt-text="Снимок экрана среды Salesforce.":::

   1. Чтобы синхронизировать эту возможность с центром партнеров Майкрософт, убедитесь, что в представлении карточка установлены следующие поля:

      - **Как можно получить справку Майкрософт?**. чтобы создать ссылку на совместную продажу, выберите соответствующий параметр справки.

        :::image type="content" source="images/salesforce/salesforce-help-option.png" alt-text="Снимок экрана, показывающий, как получить соответствующие поля в представлении карточек.":::

      - **Синхронизация с центром партнеров**: Да
      - **Контактное лицо клиента**. чтобы создать ссылку на совместную продажу, добавьте контактного лица клиента в возможную сделку.
      - **Решения Майкрософт**. чтобы поделиться ссылкой с корпорацией Майкрософт, добавьте действующее решение для совместной продажи или решения Майкрософт в эту возможность.

   1. Установив для параметра синхронизация возможных сделок **с центром партнеров** значение **Да**, подождите 10 минут, войдите в свою учетную запись центра партнеров. Ваши ссылки будут синхронизированы с Salesforce CRM, и ссылка будет заполнена. В случае сбоя поле аудита будет заполнено информацией об ошибке.

   1. Аналогично, если для параметра **Синхронизация с центром партнеров** задано значение **Да**, то при обновлении возможности в Salesforce CRM изменения будут синхронизироваться с учетной записью центра партнеров.

2. Синхронизация ссылок при создании или обновлении ссылок в центре партнеров Майкрософт и синхронизации в среде Salesforce CRM:

    1. Войдите на [панель мониторинга](https://partner.microsoft.com/dashboard/home)центра партнеров.

    1. В меню слева выберите **ссылки** .

    1. Чтобы создать новую ссылку для совместной продажи из центра партнеров, щелкните "Новая сделка".

    1. Войдите в среду Salesforce CRM.

    1. Перейдите к разделу **открытые возможности**. Ссылка, созданная в центре партнеров Майкрософт, теперь синхронизируется в Salesforce CRM.

    1. При выборе синхронизированной ссылки сведения о представлении карточки заполняются.

       :::image type="content" source="images/salesforce/salesforce-casino.png" alt-text="Снимок экрана со страницей возможностей Salesforce.":::

>[!NOTE]
>**Нужна помощь с развертыванием?**
>Чтобы получить помощь по развертыванию соединителя для совместной работы, можно приступить к техническому консультанту партнера. Они могут предоставить помощь в развертывании и рекомендации по успешной реализации.
>
>Дополнительные сведения см. [в разделе Отправка технического запроса на предварительную продажу и развертывание служб](technical-benefits.md) .

## <a name="next-steps"></a>Следующие шаги

- [Управление потенциальными клиентами](manage-leads.md)

- [Управление возможностями совместной продажи](manage-co-sell-opportunities.md)

- [Веб-перехватчики Центра партнеров](/partner-center/develop/partner-center-webhooks)
