---
title: Соединитель для совместной продажи в центре партнеров для Salesforce CRM
ms.topic: how-to
ms.date: 09/29/2020
ms.service: partner-dashboard
ms.subservice: partnercenter-csp
description: Синхронизация ссылок в центре партнеров с помощью Salesforce CRM
author: sroy
ms.author: sroy
ms.localizationpriority: medium
ms.openlocfilehash: 4bc404ca8c0647b1bcece767da75fa07ddc6b51f
ms.sourcegitcommit: d9c7890520ecd37a7651e976d540cfe65c51be54
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/02/2020
ms.locfileid: "91663865"
---
# <a name="co-sell-connector-for-salesforce-crm---overview"></a>Соединитель для совместных продаж для Salesforce CRM — обзор

### <a name="appropriate-roles"></a>Соответствующие роли

- Администратор авторов
- Системный администратор или Настройщик системы в CRM

Соединитель совместных продаж в центре партнеров позволяет продавцов совместную продажу с корпорацией Майкрософт в ваших системах CRM. Они не должны быть обучены для использования центра партнеров для управления сделками в совместных продажах. Используя соединители совместной работы, вы можете создать новую ссылку для совместной продажи, чтобы привлечь продавца Майкрософт, получать ссылки от продавца Майкрософт, принимать или отклонять ссылки, изменять данные сделки, такие как стоимость сделки и дату закрытия.  Вы также можете получить обновления от Microsoft продавцов для этих сделок совместной продажи. Все ваши ссылки можно выполнять при работе в CRM по вашему выбору, а не в центре партнеров. 

Решение основано на решении Microsoft Power Автоматизируing и использует API-интерфейсы центра партнеров.

## <a name="before-you-install---pre-requisites"></a>Перед установкой предварительных требований

|**Разделы**   |**Сведения**   |**Ссылки**   |
|--------------|--------------------|------|
|Идентификатор Microsoft Partner Network |Требуется допустимый идентификатор MPN|Присоединение к [MPN](https://partner.microsoft.com/)|
|Готовность к совместной продаже|Ваше решение для работы с IP-адресами и службами должно быть готово к совместной продаже.|[Продажа с Майкрософт](https://partner.microsoft.com/membership/sell-with-microsoft)| 
|Учетная запись Центра партнеров|Идентификатор MPN, связанный с клиентом центра партнеров, должен совпадать с ИДЕНТИФИКАТОРом MPN, связанным с решением для совместной продажи. Прежде чем развертывать соединители, убедитесь, что вы видите ссылки на совместные продажи на портале центра партнеров.|[Управление учетной записью](create-user-accounts-and-set-permissions.md)|
|Роли пользователей Центра партнеров|Сотрудник, который будет устанавливать и использовать соединители, должен быть администратором ссылок.|[Назначение пользователям ролей и разрешений](create-user-accounts-and-set-permissions.md)|
|SalesForce CRM|Роль пользователя CRM — системный администратор или Настройщик системы|[Назначение ролей в Salesforce CRM](https://help.salesforce.com/articleView?id=assigning_users_to_roles.htm&type=5)|
|Учетная запись потока Power автоматизиру|Активная учетная запись [Power автоматизируется](https://flow.microsoft.com) для системного администратора CRM или настройщика системы. Этот пользователь должен войти в [Power автоматизиру](https://flow.microsoft.com) по крайней мере один раз перед установкой.|

## <a name="installation-of-salesforce-package-for-microsoft-custom-fields"></a>Установка пакета salesforce для настраиваемых полей Майкрософт 

Чтобы синхронизировать ссылки в центре партнеров и Salesforce CRM, в решении Power автоматизировать необходимо четко определить конкретные поля ссылок Майкрософт. Эта разделительной предоставляет группам продавцов-партнеров возможность решать, какие ссылки должны предоставляться корпорации Майкрософт для совместной продажи.

1. В Salesforce активируйте **заметки** и добавьте их в список возможных сделок. 
[Ссылки](https://help.salesforce.com/articleView?err=1&id=notes_admin_setup.htm&type=5)

2. Активируйте **группы возможных сделок** , выполнив следующие действия: 
    - В программе установки используйте поле **Быстрый поиск** , чтобы найти параметры группы возможных сделок.
    - При необходимости задайте необходимые параметры.
[Ссылки](https://help.salesforce.com/articleView?id=teamselling_enabling.htm&type=5]) 

3. В Salesforce установите настраиваемые поля и объекты с помощью установщика пакетов ниже.
  
Перейдите [сюда](https://login.salesforce.com/packaging/installPackage.apexp?p0=04t2w000006Vs9a) , чтобы установить пакет в любую компанию:


Примечание. при установке в песочницу необходимо заменить начальную часть URL-адреса на http://test.salesforce.com

4. В Salesforce добавьте решения Майкрософт в список, связанный с **возможной сделкой** . После добавления щелкните значок **гаечного ключа** и обновите свойства.

## <a name="best-practice-test-before-you-go-live"></a>Рекомендации: Протестируйте перед переходом в динамический

Прежде чем устанавливать, настраивать и настраивать решение Power Автоматизация в рабочей среде, обязательно протестируйте решение на промежуточном экземпляре CRM.

- Установите решение Microsoft Power автоматизируя в промежуточной среде или экземпляре CRM.

- Создайте копию решения и запустите настройку потока настройки и автоматизации энергосбережения в промежуточной среде.

- Протестируйте решение в промежуточном или экземпляре CRM.

- В случае успеха импортируйте в рабочий экземпляр в качестве управляемого решения.

## <a name="install-partner-center-referrals-synchronization-for-salesforce-crm"></a>Установка синхронизации ссылок центра партнеров для Salesforce CRM

1. Откройте [Power автоматизиру](https://flow.microsoft.com) и выберите **среды** в правом верхнем углу. Будут показаны доступные экземпляры CRM.

2. Выберите нужный экземпляр CRM в раскрывающемся списке в правом верхнем углу.

3. Выберите **решения** на панели навигации слева.

4. Щелкните ссылку **Open AppSource (открыть** ) в верхнем меню.

   :::image type="content" source="images/cosellconnectors/openappsource.png" alt-text="Открыть AppSource":::

5. Найдите **соединители центров партнеров для Salesforce** во всплывающем окне.  

   :::image type="content" source="images/salesforce/salesforce1.png" alt-text="Открыть AppSource":::

6. Нажмите кнопку **получить сейчас** и **Продолжайте**.

7. Откроется страница, на которой можно выбрать среду CRM salesforce для установки приложения.  Согласиться с условиями.

   :::image type="content" source="images/salesforce/available-crm.png" alt-text="Открыть AppSource" с помощью кнопок со стрелками в нижней части страницы. **Запланированная установка** должна отображаться рядом с решением "ссылки центра партнеров". Установка займет 10-15 минут.

9. После завершения установки вернитесь к [Power автоматизиру](https://flow.microsoft.com) и выберите **решения** в левой области навигации. Обратите внимание, что **Синхронизация ссылок центра партнеров по Salesforce** доступна в списке решений.

10. Выберите **ссылку Центр партнеров синхронизация для Salesforce**. Доступны следующие потоки и сущности Power автоматизировать:

    :::image type="content" source="images/cosellconnectors/salesforce10.png" alt-text="Открыть AppSource":::



## <a name="configure-the-solution"></a>Настройка решения

1. После установки решения в экземпляре CRM вернитесь к [Power автоматизиру](https://flow.microsoft.com/).

2. В раскрывающемся списке **среды** в правом верхнем углу выберите экземпляр CRM, в котором было установлено решение Power автоматизиру.
3. Вам потребуется создать подключения, связывающие три учетные записи пользователей:
    - Пользователь центра партнеров с учетными данными администратора ссылок
    - События Центра партнеров
    - Администратор CRM с потоками Power автоматизиру в решении.
4. В области навигации слева выберите **подключения** и в списке выберите решение "ссылки центра партнеров".

5. Создайте подключение, щелкнув **создать соединение**.

:::image type="content" source="images/cosellconnectors/salesforce12.png" alt-text="Открыть AppSource":::

- Поиск ссылок центра партнеров (Предварительная версия) в строке поиска в правом верхнем углу.

- Создайте подключение для пользователя центра партнеров с ролью учетных данных администратора ссылок.

-  Затем создайте подключение к событиям центра партнеров для пользователя центра партнеров с учетными данными администратора ссылок.

- Создайте подключение для Common Data Service (текущего окружения) для пользователя администратора CRM.

-  После добавления всех подключений в вашей среде должны отобразиться следующие подключения:

 :::image type="content" source="images/cosellconnectors/salesforce13.png" alt-text="Открыть AppSource":::

### <a name="edit-the-connections"></a>Изменение подключений

1. Вернитесь на страницу решения и выберите **решение по умолчанию**.  Выберите **ссылку на подключение (Предварительная версия)** , щелкнув **все**.
 
:::image type="content" source="images/cosellconnectors/salesforce14.png" alt-text="Открыть AppSource":::

2. Измените каждое из подключений одним, щелкнув значок с тремя точками. Добавьте соответствующие подключения.

:::image type="content" source="images/cosellconnectors/salesforce15.png" alt-text="Открыть AppSource":::

3. Включите потоки в следующей последовательности:

- Регистрация веб-перехватчика центра партнеров (Предварительная версия)
- Создание ссылки на совместную продажу — Salesforce в центр партнеров (Предварительная версия)
- Центр партнеров обновления справочных обновлений в Salesforce (Предварительная версия)
- Центр партнеров в Salesforce (Предварительная версия)
- SalesForce в центр партнеров (Предварительная версия)
- Возможность Salesforce в центре партнеров (Предварительная версия)
- Решения Майкрософт для Salesforce в центре партнеров (Предварительная версия)

## <a name="use-webhook-apis-to-register-for-resource-change-events"></a>Использование API веб-перехватчика для регистрации событий изменения ресурсов

Интерфейсы API веб-перехватчиков центра партнеров позволяют регистрироваться для событий изменения ресурсов. Эти события изменения отправляются на URL-адрес в виде HTTP-сообщений.

1. Чтобы зарегистрировать URL-адрес, выберите **"регистрация центра партнеров" (Предварительная версия)** Power автоматизирующий поток.

2. Добавьте подключения для пользователя центра партнеров (a.) с ссылками на учетные данные администратора (b), как показано ниже.

   :::image type="content" source="images/cosellconnectors/triggerflow.png" alt-text="Открыть AppSource":::

3. При выполнении этих обновлений вы увидите

   :::image type="content" source="images/cosellconnectors/webhook1.png" alt-text="Открыть AppSource":::

4. Сохраните изменения и выберите **включить**.

   Чтобы разрешить веб-перехватчикам центра партнеров прослушивать изменения событий, выполните следующие действия.

5. Выберите **Центр партнеров для SALESFORCE CRM (Предварительная версия)**.

6. Щелкните значок **редактирования** и выберите **время получения HTTP-запроса**.

7. Щелкните значок **копирования** , чтобы скопировать предоставленный URL-адрес HTTP POST.

   :::image type="content" source="images/salesforce/copy-url.png" alt-text="Открыть AppSource"

    3. **Перезаписать существующие конечные точки триггера (при наличии**): Да (при этом перезаписываются все существующие конечные точки).

11. Выберите **выполнить** , а затем нажмите кнопку **Готово.**

Теперь веб-перехватчик может прослушивать события создания и обновления.

## <a name="customize-synchronization-steps"></a>Настройка шагов синхронизации

Когда ссылки на совместные продажи синхронизируются между центром партнеров и системой CRM, поля, синхронизированные на ПК центра партнеров, перечислены здесь.

Часто системы CRM сильно настроены. Можно настроить потоки автоматизации Powering. Следуйте указаниям в руководстве по сопоставлению полей и при необходимости внесите соответствующие изменения в действиях потоков Power автоматизиру.  Предоставляются сопоставления центров партнеров Майкрософт с CRM, но в зависимости от среды CRM вы можете выбрать дальнейшую настройку полей.

В зависимости от ваших потребностей можно настроить несколько шагов из каждого потока Power автоматизировать. Ниже приведены примеры доступных настроек.

1. Чтобы настроить поля для событий создания или обновления в центре партнеров на синхронизацию ссылок CRM, сделайте следующее:

   1. Выберите центр партнеров для Salesforce CRM (Предварительная версия).

   2. Выберите **изменить** , чтобы изменить или настроить поток Power автоматизиру.

   3. Выберите **(область) синхронизация интереса или возможной сделки**.

2. Чтобы настроить сопоставления полей CRM для создания событий, выберите **, если это новая доступная возможность, а затем**. Выберите подшаг, **Если да** , а затем — **Создание новой возможности в CRM**. Сопоставления в этом разделе можно изменить с помощью инструкции по сопоставлению полей.

   1. Чтобы настроить сопоставления полей CRM для событий обновления, щелкните шаг "(область) синхронизация интереса или возможности".

   2. Выберите **, если это обновление возможной сделки, а затем**. Выберите подшаг, **Если да** , а затем — **различие между объектами возможности в центре партнеров и модулем CRM**.  

   3. Выберите, **Если да** , а затем **обновить существующую возможную сделку**

3. Чтобы настроить поля для синхронизации ссылок CRM и PC для событий обновления, выполните следующие действия.

   1. Выберите **изменить**  , чтобы изменить или настроить поток Power автоматизиру.

   2. Выберите **(область) синхронизировать возможную сделку**.

   3. Чтобы настроить сопоставления полей CRM (в соответствии с руководством по сопоставлениям полей) для событий обновления, установите флажок, **Если между ведущими объектами в центре партнеров и CRM есть различия**.

   4. Выберите подшаг, **Если да** , а затем разверните этот шаг, чтобы **Обновить ссылку на данные о возможностях**.

   Сопоставления в этом разделе можно изменить в соответствии с руководством по сопоставлению полей.

4. Чтобы настроить поля для синхронизации ссылок CRM и PC для создания событий?

   1. Выберите **изменить**  , чтобы изменить или настроить поток Power автоматизиру.

   2. Выберите **(область) синхронизация ссылок.**

   3. Чтобы настроить сопоставления полей CRM (в соответствии с руководством по сопоставлениям полей) для создания событий, выберите **создать ссылку Майкрософт**.

Сопоставления в этом разделе можно изменить в соответствии с руководством по сопоставлению полей.


## <a name="end-to-end-bi-directional-co-sell-referral-synchronization"></a>Сквозная синхронизация двунаправленной совместной продажи

После установки, настройки и настройки решения Power автоматизиру вы можете протестировать синхронизацию ссылок для совместной продажи между Salesforce CRM и центром партнеров.

### <a name="pre-requisites"></a>Предварительные требования

Чтобы синхронизировать ссылки в центре партнеров и Salesforce CRM, решение Power автоматизирует необходимость четко разграничения ссылочные поля Майкрософт. Эта идентификация предоставляет группам продавцов возможность решать, какие ссылки должны предоставляться корпорации Майкрософт для совместной продажи.

Набор настраиваемых полей доступен в рамках синхронизации ссылок центра партнеров для сущности **возможности** решения Salesforce CRM. Пользователь с правами администратора CRM должен создать отдельный раздел CRM с настраиваемыми полями **возможностей** .

Следующие настраиваемые поля должны быть частью раздела CRM:

- **Синхронизация с центром партнеров**: следует ли синхронизировать возможность с центром партнеров Майкрософт

- **Идентификатор ссылки**: поле идентификатора только для чтения для ссылки в центре партнеров Майкрософт

- **Ссылка на ссылку: ссылка**только для чтения на ссылку в центре партнеров Майкрософт

- **Как можно**получить помощь от корпорации Майкрософт.

- **Продукты**: список продуктов, связанных с этой возможностью

- **Аудит**: журнал аудита только для чтения для синхронизации с ссылками центра партнеров

### <a name="scenarios"></a>ВАРИАНТ

1. Синхронизация ссылок при создании или обновлении ссылок в CRM и синхронизации в центре партнеров:

   1. Войдите в среду Salesforce CRM с помощью пользователя, который обладает видимостью в разделе **возможности** CRM.

   2. При создании "новой возможности" в среде Salesforce CRM убедитесь, что следующий раздел существует.

      :::image type="content" source="images/salesforce/salesforce-scenario-1.png" alt-text="Открыть AppSource" имеет значение "Да", то при обновлении возможной сделки в Salesforce CRM изменения будут синхронизироваться с учетной записью центра партнеров.

   6. Возможности, успешно синхронизированные с центром партнеров, будут идентифицированы с помощью значка ✔ в Salesforce CRM.

2. Синхронизация ссылок при создании или обновлении ссылок в центре партнеров Майкрософт и синхронизации в среде Salesforce CRM:

    1. Войдите на [панель мониторинга](https://partner.microsoft.com/dashboard/home)центра партнеров.

    2. В меню слева выберите **ссылки** .

    3. Чтобы создать новую ссылку для совместной продажи из центра партнеров, щелкните "Новая сделка".

    4. Войдите в среду Salesforce CRM.

    5. Перейдите к разделу **открытые возможности**. Ссылка, созданная в центре партнеров Майкрософт, теперь синхронизируется в Salesforce CRM.

       :::image type="content" source="images/salesforce/salesforce-casino-e.png" alt-text="Открыть AppSource":::

    6. При выборе синхронизированной ссылки сведения о представлении карточки заполняются.

## <a name="next-steps"></a>Дальнейшие действия

- [Управление потенциальными клиентами](manage-leads.md)

- [Управление возможностями совместной продажи](manage-co-sell-opportunities.md)

- [Веб-перехватчики Центра партнеров](/partner-center/develop/partner-center-webhooks)