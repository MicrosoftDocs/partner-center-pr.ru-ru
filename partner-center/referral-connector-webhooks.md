---
title: Использование веб-перехватчиков для получения событий изменения ресурсов
ms.topic: article
ms.date: 05/08/2020
ms.service: partner-dashboard
ms.subservice: partnercenter-csp
description: Использование API-интерфейсов веб-перехватчика для выяснения того, когда происходят изменения ресурсов ссылок
ms.assetid: c6fca2c0-2e6c-41b1-9be8-b363b139f15b
author: LauraBrenner
ms.author: labrenne
keywords: ссылки, API веб-перехватчика, события изменения ресурсов
ms.localizationpriority: medium
ms.openlocfilehash: 4e1eb2e9bd8ceb4f8c4bf43684305504c8594e5c
ms.sourcegitcommit: c13723216761e60d2b37596efc71f5fdecb30be1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/28/2020
ms.locfileid: "84145088"
---
# <a name="use-webhook-apis-to-register-for-resource-change-events"></a>Использование API веб-перехватчика для регистрации событий изменения ресурсов

### <a name="appropriate-roles"></a>Соответствующие роли

- Администратор авторов
- Системный администратор или Настройщик системы для Dynamics 365 CRM или Salesforce CRM


Интерфейсы API веб-перехватчиков центра партнеров позволяют регистрироваться для событий изменения ресурсов. Эти события изменения отправляются на URL-адрес в виде HTTP-сообщений.

>[!NOTE]
>В этом разделе объясняются интерфейсы API веб-перехватчика для Dynamics 365 CRM и Salesforce CRM.

1. Чтобы зарегистрировать URL-адрес, выберите **"регистрация центра партнеров" (Предварительная версия)** Power автоматизирующий поток.

2. Добавить соединения для (a.) Пользователь центра партнеров с ссылками на учетные данные администратора (b). События центра партнеров, отмеченные ниже

![Триггер](images/cosellconnectors/triggerflow.png)

3. После выполнения этих обновлений вы увидите

![Веб-перехватчики](images/cosellconnectors/webhook1.png)

4. Сохраните изменения и выберите **включить**. 

Чтобы разрешить веб-перехватчикам центра партнеров прослушивать изменения событий в партнерских объектах и ссылках объектов в центре партнеров и CRM, выполните следующие действия.

5. Выберите пункт **Центр партнеров для Dynamics 365 (Предварительная версия)** или **Центр партнеров в Salesforce (Предварительная версия для предварительной версии)**.

6. Щелкните значок **редактирования** и выберите **время получения HTTP-запроса**.

7. Щелкните значок **копирования** , чтобы скопировать предоставленный URL-адрес HTTP POST.

![Копирование URL-адреса](images/cosellconnectors/copyurl.png)

8. Теперь выберите пункт "регистрация в Power Center (Предварительная версия)" и нажмите кнопку **запустить**.

9. Убедитесь, что в правой части окна откроется окно "запуск потока", и нажмите кнопку **продолжить**.

10. Введите следующие сведения: 

    a. **Конечная точка триггера HTTP**: URL-адрес, скопированный с предыдущего шага

    b. **Регистрируемые события**: "Создание ссылок" и "обновление ссылок"

    c. **Перезаписать существующие конечные точки триггера (при наличии**): Да (при этом перезаписываются все существующие конечные точки).

Теперь веб-перехватчик может прослушивать изменения (создавать и обновлять события). 

11. Выберите **выполнить** , а затем нажмите кнопку **Готово.**

 ## <a name="customize-synchronization-steps"></a>Настройка шагов синхронизации

Когда ссылки на совместные продажи синхронизируются между центром партнеров и системой CRM, поля, синхронизированные на ПК центра партнеров, перечислены здесь.

Часто системы CRM сильно настроены. Можно настроить потоки автоматизации Powering. Следуйте указаниям в руководстве по сопоставлению полей и при необходимости внесите соответствующие изменения в действиях потоков Power автоматизиру.  Сопоставление Microsoft Partner Center с CRM предоставляется, но в зависимости от среды CRM вы можете выбрать дальнейшую настройку полей.

В зависимости от ваших потребностей можно настроить несколько шагов из каждого потока Power автоматизировать. Ниже приведены примеры доступных настроек.

1. Чтобы настроить поля для событий создания или обновления в центре партнеров на синхронизацию ссылок CRM, сделайте следующее: 

    a. Выберите пункт Центр партнеров для Dynamics 365 (Предварительная версия) или центр партнеров в Salesforce (Предварительная версия для предварительной версии).

    b. Выберите **изменить** , чтобы изменить или настроить поток Power автоматизиру.

    c. Выберите **(область) синхронизация интереса или возможной сделки**.

2. Чтобы настроить сопоставления полей CRM (в соответствии с руководством по сопоставлениям полей) для создания событий, выберите **, если это новая доступная возможность, а затем**. Выберите подшаг, **Если да** , а затем — **Создание новой возможности в CRM**. Сопоставления в этом разделе можно изменить с помощью инструкции по сопоставлению полей.

    г. Чтобы настроить сопоставления полей CRM (в соответствии с руководством по сопоставлениям полей) для событий обновления, щелкните шаг "(область) синхронизация интереса или возможности".

    Д. Выберите **, если это обновление возможной сделки, а затем**. Выберите подшаг, **Если да** , а затем — **различие между объектами возможности в центре партнеров и модулем CRM**.  

    f. Выберите, **Если да** , а затем **обновить существующую возможную сделку**
       
3. Чтобы настроить поля для синхронизации ссылок CRM и PC для событий обновления, выполните следующие действия.

    a. Выберите **изменить** , чтобы изменить или настроить поток Power автоматизиру.

    b. Выберите **(область) синхронизировать возможную сделку**.

    c. Чтобы настроить сопоставления полей CRM (в соответствии с руководством по сопоставлениям полей) для событий обновления, установите флажок, **Если между ведущими объектами в центре партнеров и CRM есть различия**. 

    г. Выберите подшаг, **Если да** , а затем разверните шаг **Обновление ссылки на данные о возможностях**.

Сопоставления в этом разделе можно изменить в соответствии с руководством по сопоставлению полей.

4. Чтобы настроить поля для синхронизации ссылок CRM и PC для создания событий?

   a. Выберите **изменить** , чтобы изменить или настроить поток Power автоматизиру.

   b. Выберите **(область) синхронизация ссылок.**

   c. Чтобы настроить сопоставления полей CRM (в соответствии с руководством по сопоставлениям полей) для создания событий, выберите **создать ссылку Майкрософт**. 

Сопоставления в этом разделе можно изменить в соответствии с руководством по сопоставлению полей.

## <a name="end-to-end-bi-directional-co-sell-referral-synchronization"></a>Сквозная синхронизация двунаправленной совместной продажи

После установки, настройки и настройки решения Power автоматизиру вы можете проверить синхронизацию ссылок совместной продажи между Dynamics 365 или Salesforce и центром партнеров.

### <a name="pre-requisites"></a>Предварительные требования

Чтобы синхронизировать ссылки в центре партнеров и Dynamics 365 CRM или в центре партнеров и Salesforce CRM, в решении Power автоматизируется четкое разграничения полей ссылок, относящихся к корпорации Майкрософт. Это дает группам продавцов возможность выбирать, какие ссылки должны предоставляться корпорации Майкрософт для совместной продажи.

Набор настраиваемых полей доступен в рамках синхронизации ссылок центра партнеров для сущности **возможности** решения Dynamics 365. Пользователь с правами администратора CRM должен создать отдельный раздел CRM с настраиваемыми полями **возможностей** .

Следующие настраиваемые поля должны быть частью раздела CRM:

- **Синхронизация с центром партнеров**: следует ли синхронизировать возможность с центром партнеров Майкрософт

- **Идентификатор ссылки**: поле идентификатора только для чтения для ссылки в центре партнеров Майкрософт

- **Ссылка на ссылку: ссылка**только для чтения на ссылку в центре партнеров Майкрософт

- **Как можно получить справку Майкрософт?**: Помогите корпорации Майкрософт получить ссылку

- **Продукты**: список продуктов, связанных с этой возможностью

- **Аудит**: журнал аудита только для чтения для синхронизации с ссылками центра партнеров

### <a name="scenarios"></a>ВАРИАНТ

1. Синхронизация ссылок при создании или обновлении ссылок в CRM и синхронизации в центре партнеров:

    a. Войдите в среду Dynamics 365 CRM с помощью пользователя, который обладает видимостью в разделе **возможности** CRM.

    b. При создании "новой возможности" в среде Dynamics 365 убедитесь, что указан следующий раздел:

   ![Opportunity;](images/cosellconnectors/opportunity.png)

    c. Чтобы синхронизировать эту возможность с центром партнеров Майкрософт, убедитесь, что в представлении карточка установлены следующие поля:

    - "Синхронизация с центром партнеров": Да

    - «Как можно получить справку Майкрософт?»: выберите следующие сведения:

    ![Параметры справки](images/cosellconnectors/help.png)

    - Продукты: идентификаторы решений для продукта

    г. После создания возможности в Dynamics 365 с параметром **Синхронизация с центром партнеров** задайте значение **Да**, подождите 10 минут, войдите в свою учетную запись центра партнеров. Ваши ссылки будут синхронизированы с Dynamics 365.

    Д. Следовательно, если для возможной сделки с параметром "Синхронизация с центром партнеров" установлено значение "Да", то при обновлении возможности в Dynamics 365 CRM изменения будут синхронизированы в учетной записи центра партнеров.

    f. Возможности, успешно синхронизированные с центром партнеров, будут идентифицированы с помощью значка ✔ в Dynamics 365.

2. Синхронизация ссылок при создании или обновлении ссылок в центре партнеров Майкрософт и синхронизации в среде Dynamics 365: 

    a. Войдите на [панель мониторинга](https://partner.microsoft.com/dashboard/home)центра партнеров.

    b. В меню слева выберите **ссылки** .

    c. Чтобы создать новую ссылку для совместной продажи из центра партнеров, щелкните "Новая сделка".

    г. Войдите в среду Dynamics 365 CRM. 

    Д. Перейдите к разделу **открытые возможности**. Ссылка, созданная в центре партнеров Майкрософт, теперь синхронизируется в Dynamics 365 CRM.

    f. При выборе синхронизированной ссылки сведения о представлении карточки заполняются.

 ### <a name="next-steps"></a>Дальнейшие шаги

- [Дополнительные сведения о платформе Microsoft Power автоматизиру](https://docs.microsoft.com/power-automate/)

- [События веб-перехватчика центра партнеров](https://docs.microsoft.com/partner-center/develop/partner-center-webhook-events)

- [Управление потенциальными клиентами](manage-leads.md)

- [Управление возможностями совместной продажи](manage-co-sell-opportunities.md)
